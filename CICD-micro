pipeline {
    agent {
        label "java"
    }
    stages {
        stage("Build the app") {
            steps {
                script {
                    // Define the list of project directories
                    def projects = ["acceleration-a", "acceleration-calc", "acceleration-dv"]

                    // Loop through each project and run the required commands
                    for (project in projects) {
                        dir("Micro/${project}") {
                            echo "Building project: ${project}"
                            sh "yarn install"
                            sh "yarn build"
                            echo "Build completed for ${project}"
                        }
                    }
                }
            }
        }
    }
}
